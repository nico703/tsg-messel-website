---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getEntry, getCollection } from "astro:content";

// aktuelle Seite laden
const { slug } = Astro.params;
const post = await getEntry("news", slug);

// fallback falls slug nicht existiert
if (!post) {
  throw new Error(`News article not found: ${slug}`);
}

// Datum sicher als string formatieren
const formattedDate = new Date(post.data.date as any).toLocaleDateString("de-DE", {
  day: "2-digit",
  month: "2-digit",
  year: "numeric",
});

---
<BaseLayout title={post.data.title}>

  <section class="section">
    <div class="container">
      <h1>{post.data.title}</h1>

      <p style="color:#777; margin-bottom:2rem;">
        {formattedDate}
      </p>

      <article class="news-article">
        {post.body}
      </article>
    </div>
  </section>

</BaseLayout>

