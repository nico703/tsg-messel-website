---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

/**
 * Sagt Astro, welche Detailseiten es gibt:
 * /news/<slug> fÃ¼r jeden Eintrag aus der "news"-Collection.
 */
export async function getStaticPaths() {
  const posts = await getCollection("news");

  return posts.map((post) => ({
    params: { slug: post.slug },
    props: { post },
  }));
}

// Der einzelne Beitrag wird aus den props genommen:
const { post } = Astro.props;

// Datum robust formatieren (egal ob string oder Date)
const formattedDate = new Date(post.data.date as any).toLocaleDateString(
  "de-DE",
  {
    day: "2-digit",
    month: "2-digit",
    year: "numeric",
  }
);
---

<BaseLayout title={post.data.title}>

  <section class="section">
    <div class="container">
      <h1>{post.data.title}</h1>

      <p style="color:#777; margin-bottom:2rem;">
        {formattedDate}
      </p>

      <article class="news-article">
        {post.body}
      </article>
    </div>
  </section>

</BaseLayout>

