---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const posts = await getCollection("news");
const sorted = posts.sort((a, b) =>
  new Date(b.data.date).getTime() - new Date(a.data.date).getTime()
);
---

<BaseLayout title="News – TSG Messel">

  <section class="section">
    <div class="container">
      <h1>News & Aktuelles</h1>
      <p>Spielberichte, Ankündigungen und Informationen aus unseren Abteilungen.</p>

      <div class="grid grid-3" style="margin-top: 2rem;">

        {sorted.map((post) => (
          <a href={`/news/${post.slug}/`} class="card">
            <h3>{post.data.title}</h3>
            {post.data.description && (
              <p style="color: #555;">{post.data.description}</p>
            )}
            <p style="font-size: 0.8rem; margin-top: 0.5rem; color: #777;">
              {post.data.date}
            </p>
          </a>
        ))}

      </div>
    </div>
  </section>

</BaseLayout>
